/* ---------- CHIBI: responsive y estilos ---------- */
.chibi-wrap {
  position: relative;
  z-index: 2;
  width: 100%;
  max-width: 220px; /* ancho máximo dentro del panel */
  margin: 6px auto;
  text-align: center;
  pointer-events: none; /* no interrumpe clicks en inputs */
}

.chibi-wrap svg { 
  width: 100%;
  height: auto;
  display: block;
}

/* colores y apariencia */
.aura { fill: rgba(99,102,241,0.16); transition: opacity .4s ease; }
.body { fill: #c7d2fe; opacity: .95; }
.cloak { fill: #4f46e5; opacity: .95; }
.head { fill: #ffe9d6; stroke: #2b2b2b; stroke-width: 1.5; }
.hair { fill: #0f172a; }

/* ojos cerrados */
.eye-line { stroke: #111827; stroke-width: 3; stroke-linecap: round; }

/* ojos abiertos */
.eyes-open .eye { fill: #0b1220; }
.eyes-open .shine { fill: rgba(255,255,255,0.9); }

/* boca */
.mouth { fill: none; stroke: #7c3aed; stroke-width: 1.6; stroke-linecap: round; }

/* brazos */
.arm { stroke: #1f2937; stroke-width: 6; stroke-linecap: round; fill: none; transform-origin: center; }

/* logo */
.logo { fill: #1e40af; rx: 6; transition: transform .45s cubic-bezier(.2,.9,.3,1), opacity .45s; }

/* mensaje */
.chibi-msg {
  margin-top: 8px;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  opacity: 0.95;
  pointer-events: none;
}

/* ---------- Estados: dormido (por defecto) ---------- */
/* dormido: ojos cerrados (eyes-open opacity 0), logo oculto, brazos relajados */
#chibi .eyes-open { opacity: 0; transition: opacity .25s ease; }
#chibi #logo-group { opacity: 0; transform-origin: center; transition: transform .45s ease, opacity .45s ease; }

/* cabeza breathing (muy sutil) */
#chibi .head { transform-origin: 100px 80px; animation: breath 3s ease-in-out infinite; }
@keyframes breath {
  0% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-2px) scale(1.01); }
  100% { transform: translateY(0) scale(1); }
}

/* ---------- Estados: despierto (clase .awake en el SVG) ---------- */
/* activamos ojos abiertos, ocultamos ojos-closed, levantamos logo, movemos brazos */
#chibi.awake .eyes-open { opacity: 1; }
#chibi.awake .eyes-closed { opacity: 0; }

#chibi.awake #logo-group {
  opacity: 1;
  transform: translate(0,-18px) scale(1);
}

/* brazos animados (levantando) */
#chibi.awake #arm-left {
  animation: armLeftUp 0.7s ease-in-out forwards;
  transform-origin: 60px 140px;
}
#chibi.awake #arm-right {
  animation: armRightUp 0.7s ease-in-out forwards;
  transform-origin: 140px 140px;
}

@keyframes armLeftUp {
  0% { transform: rotate(0deg); }
  60% { transform: rotate(-30deg); }
  100% { transform: rotate(-20deg); }
}
@keyframes armRightUp {
  0% { transform: rotate(0deg); }
  60% { transform: rotate(30deg); }
  100% { transform: rotate(20deg); }
}

/* ritmo de aura y cabeza más activo cuando awake */
#chibi.awake .aura { animation: auraPulse 1.6s ease-in-out infinite; opacity: 1; }
@keyframes auraPulse {
  0% { transform: scale(1); opacity: 0.4; }
  50% { transform: scale(1.07); opacity: 0.9; }
  100% { transform: scale(1); opacity: 0.4; }
}

/* optional: pequeño rebote al activar */
#chibi.awake .head { animation: headBounce 0.9s ease-in-out; }
@keyframes headBounce {
  0% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
  100% { transform: translateY(0); }
}

/* Make sure the panel text remains readable — overlay sits behind chibi */
.decorative-panel .overlay { z-index: 1; opacity: .42; background: linear-gradient(135deg, rgba(30,58,138,0.85), rgba(59,130,246,0.55)); position:absolute; inset:0; }

/* ensure svg above overlay */
.chibi-wrap { position: relative; z-index: 2; }

/* Responsive tweaks: panel smaller on narrow screens */
@media (max-width: 720px) {
  .decorative-panel { min-width: 140px; max-width: 180px; padding: 14px; }
  .chibi-wrap { max-width: 160px; }
  .chibi-msg { font-size: 13px; }
}
